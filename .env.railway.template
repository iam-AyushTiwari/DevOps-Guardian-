# DevOps Guardian - Railway Environment Variables

## Required for All Services

### Supabase PostgreSQL Database
# Get these from Supabase Dashboard → Project Settings → Database
# Connection String (Pooler) - Use this for DATABASE_URL
DATABASE_URL=postgresql://postgres.xxxxx:password@aws-0-us-east-1.pooler.supabase.com:6543/postgres

# Direct Connection String - Use this for DIRECT_URL (Prisma migrations)
DIRECT_URL=postgresql://postgres:password@db.xxxxx.supabase.co:5432/postgres

---

## API Backend Service Environment Variables

### Core Configuration
PORT=3001  # Auto-set by Railway, but can customize
NODE_ENV=production

### Database (Copy from Supabase)
DATABASE_URL=postgresql://postgres.xxxxx:password@aws-0-us-east-1.pooler.supabase.com:6543/postgres
DIRECT_URL=postgresql://postgres:password@db.xxxxx.supabase.co:5432/postgres

### Gemini AI (Required)
GEMINI_API_KEY=your_gemini_api_key_here  # Get from https://aistudio.google.com/

### E2B Sandbox (Required)
E2B_API_KEY=your_e2b_api_key_here  # Get from https://e2b.dev/

### GitHub OAuth (Required)
GITHUB_CLIENT_ID=your_github_oauth_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_client_secret
# Update callback URL in GitHub OAuth app to: https://your-api.railway.app/api/auth/github/callback

### AWS Secrets Manager (Required for secure token storage)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1

### Frontend URL (Required for CORS and OAuth redirects)
FRONTEND_URL=https://your-web-app.railway.app  # Update after deploying web service

### Slack Integration (Optional - for notifications)
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token  # Optional
SLACK_SIGNING_SECRET=your_slack_signing_secret  # Optional

---

## Web Frontend Service Environment Variables

### API Connection (Required)
NEXT_PUBLIC_API_URL=https://your-api.railway.app  # Update after deploying API service

### Build Configuration
NODE_ENV=production

---

## Deployment Order

1. **Setup Supabase first** → Get DATABASE_URL and DIRECT_URL
2. **Deploy API to Railway** → Set all env vars including Supabase URLs
3. **Deploy Web to Railway** → Set NEXT_PUBLIC_API_URL to API service URL
4. **Update FRONTEND_URL in API** → Set to Web service URL (enables CORS)
5. **Update GitHub OAuth callback** → Use Railway API URL

---

## Quick Railway Setup Commands

### After creating services in Railway UI:

```bash
# For API Service
railway link
railway variables set GEMINI_API_KEY=<your-key>
railway variables set E2B_API_KEY=<your-key>
railway variables set GITHUB_CLIENT_ID=<your-id>
railway variables set GITHUB_CLIENT_SECRET=<your-secret>
# ... continue with other variables
```

### Or use Railway UI:
1. Navigate to service → Variables tab
2. Click "New Variable"
3. Paste values from this template

---

## Security Notes

> [!CAUTION]
> Never commit real API keys to Git. This file is a template only.

> [!IMPORTANT]
> Rotate all keys after deployment completes for maximum security.

> [!TIP]
> Use Railway's "Copy from..." feature to duplicate DATABASE_URL between services.
